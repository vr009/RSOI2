version: "3"
services:
  gateway:
    hostname: gateway
    build:
      context: .
      dockerfile: ./services/gateway/.
    ports:
      - 8080:8080
    links:
      - library
      - rating
      - reservation
    environment:
      - LIB_SERVICE_URL=library:50051
      - RATING_SERVICE_URL=rating:50053
      - RESERVATION_SERVICE_URL=reservation:50052
    command:
      - ./gateway

  library:
    hostname: library
    build:
      context: .
      dockerfile: ./services/library/.
    ports:
      - 50051:50051
    command:
      - ./library

  reservation:
    hostname: reservation
    build:
      context: .
      dockerfile: ./services/reservation/.
    ports:
      - 50052:50052
    command:
      - ./reservation

  rating:
    build:
      context: .
      dockerfile: ./services/rating/.
    ports:
      - 50053:50053
    command:
      - ./rating
